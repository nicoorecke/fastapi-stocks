<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Indicadores de Acciones</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Indicadores de Acciones</h1>
    <table>
        <thead>
            <tr>
                <th class="titulo">Ticker</th>
                <th class="titulo">RSI<br>V</th>
                <th class="titulo">SMA<br>RSI</th>
                <th class="titulo">RSI</th>
                <th class="titulo">EMA<br>20</th>
                <th class="titulo">EMA<br>50</th>
                <th class="titulo">EMA<br>100</th>
                <th class="titulo">EMA<br>200</th>
                <th class="titulo">SMA<br>21</th>
                <th class="titulo">SMA<br>30</th>
                <th class="titulo">MACD</th>
            </tr>
        </thead>
        <tbody>
            {% for indicador in indicadores %}
            {% set all_green =
                indicador.rsi_cruce_arriba_sma
                and indicador.precio_ema_20
                and indicador.precio_ema_50
                and indicador.precio_ema_100
                and indicador.precio_ema_200
                and indicador.precio_sma_21
                and indicador.precio_sma_30
                and indicador.macd_cruce_arriba_signal
            %}
            <tr>
                <td class="ticker">
                    {% if all_green %}
                        <span class="number-glow">{{ indicador.ticker }}</span>
                    {% else %}
                        {{ indicador.ticker }}
                    {% endif %}
                </td>

                <td class="rsi">{{ indicador.rsi }}</td>
                <td class="sma-rsi">{{ indicador.sma_rsi }}</td>

                <!-- RSI -->
                <td class="indicador">
                    {% if indicador.rsi_cruce_arriba_sma %}
                        <span class="number-glow">{{ indicador.dias_desde_cruce_rsi }}</span>
                    {% else %}
                        <span class="light red"></span>
                    {% endif %}
                </td>

                <!-- EMAs -->
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_ema_20 else 'red' }}"></span></td>
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_ema_50 else 'red' }}"></span></td>
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_ema_100 else 'red' }}"></span></td>
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_ema_200 else 'red' }}"></span></td>

                <!-- SMAs -->
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_sma_21 else 'red' }}"></span></td>
                <td class="indicador"><span class="light {{ 'green' if indicador.precio_sma_30 else 'red' }}"></span></td>

                <!-- MACD -->
                <td class="indicador">
                    {% if indicador.macd_cruce_arriba_signal %}
                        <span class="number-glow">{{ indicador.dias_desde_cruce_macd }}</span>
                    {% else %}
                        <span class="light red"></span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
